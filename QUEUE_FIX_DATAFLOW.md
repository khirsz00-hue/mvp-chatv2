# Queue Fix - Data Flow Diagram

## ğŸ“Š Task Processing Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RAW TASKS FROM DATABASE                      â”‚
â”‚                         tasks: Task[]                           â”‚
â”‚  (15 tasks: 12 overdue, 2 today, 1 no date)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FILTER BY CONTEXT & MODE                    â”‚
â”‚                    filteredTasks (lines 409-425)                â”‚
â”‚  â€¢ Filter by context_type (if not 'all')                        â”‚
â”‚  â€¢ Filter completed tasks                                        â”‚
â”‚  â€¢ Apply work mode (low_focus, quick_wins)                      â”‚
â”‚  âœ… DOES NOT filter by due_date anymore!                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    APPLY INTELLIGENT SCORING                     â”‚
â”‚                    scoredTasks (line 428)                       â”‚
â”‚  â€¢ useScoredTasks() adds _score to each task                   â”‚
â”‚  â€¢ Scoring factors: priority, deadline, energy fit, etc.       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”‚                   â”‚
                             â–¼                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   EXTRACT OVERDUE TASKS    â”‚  â”‚  NON-OVERDUE TASKS    â”‚
        â”‚  useOverdueTasks() (431)   â”‚  â”‚  (lines 436-438)      â”‚
        â”‚                            â”‚  â”‚                       â”‚
        â”‚  overdueTasks: Task[]      â”‚  â”‚  nonOverdueTasks:     â”‚
        â”‚  (12 tasks)                â”‚  â”‚  Task[]               â”‚
        â”‚                            â”‚  â”‚  (3 tasks)            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                             â”‚
                 â”‚                             â–¼
                 â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚              â”‚  CATEGORIZE BY DUE DATE          â”‚
                 â”‚              â”‚  (lines 441-455)                 â”‚
                 â”‚              â”‚                                  â”‚
                 â”‚              â”‚  tasksByCategory:                â”‚
                 â”‚              â”‚  â€¢ todayDue: due_date = today    â”‚
                 â”‚              â”‚  â€¢ available: no date or future  â”‚
                 â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                     â”‚
                 â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚                     â”‚             â”‚              â”‚            â”‚
                 â”‚                     â–¼             â–¼              â–¼            â–¼
                 â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚       â”‚  MUST TASKS     â”‚ â”‚ TODAY    â”‚ â”‚ AVAILABLE  â”‚ â”‚ QUEUE   â”‚
                 â”‚       â”‚  (lines 471-473)â”‚ â”‚ TASKS    â”‚ â”‚ TASKS      â”‚ â”‚ HOOK    â”‚
                 â”‚       â”‚                 â”‚ â”‚ (458-462)â”‚ â”‚ (465-468)  â”‚ â”‚ (476)   â”‚
                 â”‚       â”‚  mustTasks: []  â”‚ â”‚          â”‚ â”‚            â”‚ â”‚         â”‚
                 â”‚       â”‚  (is_must=true) â”‚ â”‚ Non-MUST â”‚ â”‚ No date or â”‚ â”‚ later:  â”‚
                 â”‚       â”‚  Max 3 tasks    â”‚ â”‚ tasks    â”‚ â”‚ future     â”‚ â”‚ Task[]  â”‚
                 â”‚       â”‚                 â”‚ â”‚ due todayâ”‚ â”‚ tasks      â”‚ â”‚         â”‚
                 â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                 â”‚                â”‚               â”‚             â”‚             â”‚
                 â”‚                â”‚               â”‚             â”‚             â”‚
                 â–¼                â–¼               â–¼             â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              UI RENDERING                                        â”‚
â”‚                         (lines 1245-1700)                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ âš ï¸ SEKCJA 1: PRZETERMINOWANE (Red Border)                              â”‚  â”‚
â”‚  â”‚ OverdueTasksSection component                                           â”‚  â”‚
â”‚  â”‚ â€¢ Shows: overdueTasks (12 tasks)                                        â”‚  â”‚
â”‚  â”‚ â€¢ Always visible if has tasks                                           â”‚  â”‚
â”‚  â”‚ â€¢ Sorted: oldest first                                                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“Œ SEKCJA 2: MUST (Purple Border)                                      â”‚  â”‚
â”‚  â”‚ Lines 1318-1358                                                          â”‚  â”‚
â”‚  â”‚ â€¢ Shows: mustTasks (max 3)                                              â”‚  â”‚
â”‚  â”‚ â€¢ Badge: "X/3"                                                          â”‚  â”‚
â”‚  â”‚ â€¢ Queue position: 1, 2, 3                                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“Š SEKCJA 3: Kolejka NA DZIÅš - Top 3 (Purple Gradient)                 â”‚  â”‚
â”‚  â”‚ Lines 1361-1401                                                          â”‚  â”‚
â”‚  â”‚ â€¢ Shows: todayTasks.slice(0, 3)                                         â”‚  â”‚
â”‚  â”‚ â€¢ Label: "Zadania zaplanowane na dzisiaj (YYYY-MM-DD)"                 â”‚  â”‚
â”‚  â”‚ â€¢ Queue position: 4, 5, 6 (after MUST)                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“‹ SEKCJA 4: PozostaÅ‚e na dziÅ› (Gray, Collapsible)                     â”‚  â”‚
â”‚  â”‚ Lines 1403-1453                                                          â”‚  â”‚
â”‚  â”‚ â€¢ Shows: todayTasks.slice(3) (if > 3 tasks)                            â”‚  â”‚
â”‚  â”‚ â€¢ Controlled by: showRestOfToday state                                  â”‚  â”‚
â”‚  â”‚ â€¢ Label: "Zadania z terminem X poza Top 3"                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ—“ï¸ SEKCJA 5: DOSTÄ˜PNE (Blue, Collapsible)                              â”‚  â”‚
â”‚  â”‚ Lines 1455-1505                                                          â”‚  â”‚
â”‚  â”‚ â€¢ Shows: availableTasks                                                 â”‚  â”‚
â”‚  â”‚ â€¢ Controlled by: showAvailable state                                    â”‚  â”‚
â”‚  â”‚ â€¢ Label: "Zadania bez terminu lub na przyszÅ‚oÅ›Ä‡..."                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“‹ SEKCJA 6: Na pÃ³Åºniej (Blue, Debug Section)                          â”‚  â”‚
â”‚  â”‚ Lines 1636-1700                                                          â”‚  â”‚
â”‚  â”‚ â€¢ Shows: later (capacity overflow)                                      â”‚  â”‚
â”‚  â”‚ â€¢ Controlled by: showLaterQueue state                                   â”‚  â”‚
â”‚  â”‚ â€¢ Debug info included                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ‰ EMPTY STATE (Green) - ONLY if all categories empty                  â”‚  â”‚
â”‚  â”‚ Lines 1561-1572                                                          â”‚  â”‚
â”‚  â”‚ Condition: mustTasks=0 && todayTasks=0 && availableTasks=0 &&          â”‚  â”‚
â”‚  â”‚            overdueTasks=0                                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Key Differences: Before vs After

### BEFORE (Broken):

```
tasks (15) 
  â†’ filteredTasks (0) âŒ filtered by due_date === today
    â†’ "Brak zadaÅ„ w kolejce"
```

### AFTER (Fixed):

```
tasks (15)
  â†’ filteredTasks (15) âœ… no date filter
    â†’ scoredTasks (15)
      â†’ overdueTasks (12) â†’ Red section
      â†’ nonOverdueTasks (3)
        â†’ mustTasks (0) â†’ Purple section
        â†’ todayTasks (2) â†’ Purple gradient section
        â†’ availableTasks (1) â†’ Blue section
```

## ğŸ“ˆ Queue Position Calculation

Queue positions are calculated to maintain proper ordering:

```typescript
// MUST tasks: positions 1-3
mustTasks[0] â†’ queuePosition = 1
mustTasks[1] â†’ queuePosition = 2
mustTasks[2] â†’ queuePosition = 3

// Today tasks Top 3: positions 4-6
todayTasks[0] â†’ queuePosition = mustTasks.length + 1 = 4
todayTasks[1] â†’ queuePosition = mustTasks.length + 2 = 5
todayTasks[2] â†’ queuePosition = mustTasks.length + 3 = 6

// Today tasks #4+: positions 7+
todayTasks[3] â†’ queuePosition = mustTasks.length + 3 + 1 = 7
todayTasks[4] â†’ queuePosition = mustTasks.length + 3 + 2 = 8

// Available tasks: positions after all today tasks
availableTasks[0] â†’ queuePosition = mustTasks.length + todayTasks.length + 1
availableTasks[1] â†’ queuePosition = mustTasks.length + todayTasks.length + 2
```

## ğŸ”„ State Management

New collapsible states:

```typescript
const [showRestOfToday, setShowRestOfToday] = useState(false)
const [showAvailable, setShowAvailable] = useState(false)

// Existing states (unchanged):
const [showLaterQueue, setShowLaterQueue] = useState(false)
const [showRestOfQueue, setShowRestOfQueue] = useState(false)
```

## ğŸ¨ Color Scheme

```
âš ï¸  Red    â†’ rgb(252, 165, 165) â†’ Urgent/Overdue
ğŸ“Œ  Purple â†’ rgb(216, 180, 254) â†’ Important/MUST
ğŸ“Š  Purple â†’ Gradient purple-pink â†’ Today's priority
ğŸ“‹  Gray   â†’ rgb(229, 231, 235) â†’ Rest of today
ğŸ—“ï¸  Blue   â†’ rgb(147, 197, 253) â†’ Available/Optional
ğŸ“‹  Blue   â†’ rgb(191, 219, 254) â†’ Later (overflow)
ğŸ‰  Green  â†’ rgb(134, 239, 172) â†’ Success/Empty
```
